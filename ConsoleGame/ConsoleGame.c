#include <stdio.h>
#include <stdlib.h>
#include <windows.h>
#include "resource.h"
#include <mmsystem.h>
#include <time.h>
#include <conio.h>

#pragma comment(lib, "winmm.lib")

#define X_BACKGROUND 150
#define Y_BACKGROUND 50
#define X_BUSH 15
#define Y_BUSH 9
#define X_CLOUD 15
#define Y_CLOUD 9
#define X_ENEMY 4
#define Y_ENEMY 4
#define X_HERO 9
#define Y_HERO 15

enum ENEMY_VIEW
{
	ENEMY_VIEW_RIGHT = 0,
	ENEMY_VIEW_LEFT = 1,
	ENEMY_VIEW_NUMBER = 2
};

enum HERO_VIEW
{
	HERO_VIEW_FRONT = 0,
	HERO_VIEW_RIGHT_1 = 1,
	HERO_VIEW_RIGHT_2 = 2,
	HERO_VIEW_LEFT_1 = 3,
	HERO_VIEW_LEFT_2 = 4,
	HERO_VIEW_NUMBER = 5
};

int background[Y_BACKGROUND][X_BACKGROUND] =
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,0,
	0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,
	0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,
	0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,
	0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,
	0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,
	0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,
	0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
};

int bush[Y_BUSH][X_BUSH] =
{
	11,11,11,11,11,11,11,10,11,11,11,11,11,11,11,
	11,11,11,11,11,11,10,10,10,11,11,11,11,11,11,
	11,11,11,11,11,10,10,10,10,10,11,11,11,11,11,
	11,11,11,11,10,10,10,10,10,10,10,11,11,11,11,
	11,11,11,10,10,10,10,10,10,10,10,10,11,11,11,
	11,11,10,10,10,10,10,10,10,10,10,10,10,11,11,
	11,10,10,10,10,10,10,10,10,10,10,10,10,10,11,
	10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,
	10,10,10,10,10,10,10,10,10,10,10,10,10,10,10
};

int cloud[Y_CLOUD][X_CLOUD] =
{
	11,11,11,11,11,11,15,15,15,11,11,11,11,11,11,
	11,11,15,15,15,15,15,15,15,15,15,15,15,11,11,
	11,15,15,15,15,15,15,15,15,15,15,15,15,15,11,
	11,15,15,15,15,15,15,15,15,15,15,15,15,15,11,
	15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,
	11,15,15,15,15,15,15,15,15,15,15,15,15,15,11,
	11,11,15,15,15,15,15,15,15,15,15,15,15,11,11,
	11,11,15,15,15,15,15,15,15,15,15,15,15,11,11,
	11,11,11,15,15,11,11,15,11,11,15,15,11,11,11
};

int enemy[ENEMY_VIEW_NUMBER][Y_ENEMY][X_ENEMY] =
{
	{0,0,0,0,
	0,0,15,0,
	0,0,0,0,
	16,0,0,16},

	{0,0,0,0,
	0,15,0,0,
	0,0,0,0,
	16,0,0,16}
};

int hero[HERO_VIEW_NUMBER][Y_HERO][X_HERO] =
{
	{16,0,0,0,0,0,0,0,16,
	0,15,15,15,15,15,15,15,0,
	0,15,15,0,15,0,15,15,0,
	16,0,15,15,15,15,15,0,16,
	16,16,0,15,15,15,0,16,16,
	16,16,16,0,15,0,16,16,16,
	16,16,8,8,8,8,8,16,16,
	16,2,8,8,0,8,8,12,16,
	2,16,8,8,8,8,8,16,12,
	2,16,8,8,0,8,8,16,12,
	0,16,8,8,8,8,8,16,0,
	16,16,16,2,16,12,16,16,16,
	16,16,16,2,16,12,16,16,16,
	16,16,16,2,16,12,16,16,16,
	16,16,0,0,16,0,0,16,16},

	{16,0,0,0,0,0,0,0,16,
	0,15,15,15,15,15,15,15,0,
	0,15,15,15,15,15,0,15,0,
	16,0,15,15,15,15,15,0,16,
	16,16,0,15,15,15,0,16,16,
	16,16,16,0,15,0,16,16,16,
	16,16,8,8,8,8,8,16,16,
	16,16,8,8,2,8,8,16,16,
	16,16,8,8,2,8,8,16,16,
	16,16,8,8,8,2,8,16,16,
	16,16,8,8,8,8,0,16,16,
	16,16,16,16,2,16,16,16,16,
	16,16,16,2,16,12,16,16,16,
	16,16,2,16,16,16,12,16,16,
	16,16,0,0,16,16,0,0,16},

	{16,0,0,0,0,0,0,0,16,
	0,15,15,15,15,15,15,15,0,
	0,15,15,15,15,15,0,15,0,
	16,0,15,15,15,15,15,0,16,
	16,16,0,15,15,15,0,16,16,
	16,16,16,0,15,0,16,16,16,
	16,16,8,8,8,8,8,16,16,
	16,16,8,8,2,8,8,16,16,
	16,16,8,2,8,8,8,16,16,
	16,16,8,2,8,8,8,16,16,
	16,16,0,8,8,8,8,16,16,
	16,16,16,16,2,16,16,16,16,
	16,16,16,12,16,2,16,16,16,
	16,16,12,16,16,16,2,16,16,
	16,16,0,0,16,16,0,0,16},

	{16,0,0,0,0,0,0,0,16,
	0,15,15,15,15,15,15,15,0,
	0,15,0,15,15,15,15,15,0,
	16,0,15,15,15,15,15,0,16,
	16,16,0,15,15,15,0,16,16,
	16,16,16,0,15,0,16,16,16,
	16,16,8,8,8,8,8,16,16,
	16,16,8,8,12,8,8,16,16,
	16,16,8,8,12,8,8,16,16,
	16,16,8,12,8,8,8,16,16,
	16,16,0,8,8,8,8,16,16,
	16,16,16,16,12,16,16,16,16,
	16,16,16,2,16,12,16,16,16,
	16,16,2,16,16,16,12,16,16,
	16,0,0,16,16,0,0,16,16},

	{16,0,0,0,0,0,0,0,16,
	0,15,15,15,15,15,15,15,0,
	0,15,0,15,15,15,15,15,0,
	16,0,15,15,15,15,15,0,16,
	16,16,0,15,15,15,0,16,16,
	16,16,16,0,15,0,16,16,16,
	16,16,8,8,8,8,8,16,16,
	16,16,8,8,12,8,8,16,16,
	16,16,8,8,8,12,8,16,16,
	16,16,8,8,8,12,8,16,16,
	16,16,8,8,8,8,0,16,16,
	16,16,16,16,12,16,16,16,16,
	16,16,16,12,16,2,16,16,16,
	16,16,12,16,16,16,2,16,16,
	16,0,0,16,16,0,0,16,16}
};

HANDLE window;

void change_color(int back, int front)
{
	SetConsoleTextAttribute(window, back * 16 + front);
}

void paint(int color)
{
	change_color(color, color); printf(" ");
}

void put_cursor(int x_cursor, int y_cursor)
{
	SetConsoleCursorPosition(window, (COORD) { (SHORT)x_cursor, (SHORT)y_cursor });
}

void set_window(int y_window, int x_window)
{
	SetConsoleWindowInfo(window, 1, &((SMALL_RECT) { 0, 0, (SHORT)x_window, (SHORT)y_window }));
	SetConsoleScreenBufferSize(window, (COORD) { 1000, 100 });
}

void place_bush(int y_bush, int x_bush)
{
	int i, j;

	for (i = 0; i < Y_BUSH; i++)
	{
		for (j = 0; j < X_BUSH; j++)
		{
			background[i + y_bush][j + x_bush] = bush[i][j];
		}
	}
}

void place_cloud(int y_cloud, int x_cloud)
{
	int i, j;

	for (i = 0; i < Y_CLOUD; i++)
	{
		for (j = 0; j < X_CLOUD; j++)
		{
			background[i + y_cloud][j + x_cloud] = cloud[i][j];
		}
	}
}

void put_background(int y1, int x1, int y2, int x2, int y3, int x3)
{
	y2 += y1;
	y3 += y1;

	x2 += x1;
	x3 += x1;

	int i, j;

	for (i = y2; i <= y3; i++)
	{
		put_cursor(x2, i);
		for (j = x2; j <= x3; j++)
		{
			paint(background[i][j]);
		}
	}
	change_color(15, 0);
}

void put_hero(int x_hero, int y_hero, int view_hero)
{
	int i, j;

	for (i = 0; i < Y_HERO; i++)
	{
		put_cursor(x_hero, y_hero + i);
		for (j = 0; j < X_HERO; j++)
		{
			if (hero[view_hero][i][j] == 16) { paint(background[i + y_hero][j + x_hero]); }
			else { paint(hero[view_hero][i][j]); }
		}
	}
	change_color(15, 0);
}

void put_enemy(int x_enemy, int y_enemy, int view_enemy)
{
	int i, j;

	for (i = 0; i < Y_ENEMY; i++)
	{
		put_cursor(x_enemy, y_enemy + i);
		for (j = 0; j < X_ENEMY; j++)
		{
			if (enemy[view_enemy][i][j] == 16) { paint(background[i + y_enemy][j + x_enemy]); }
			else { paint(enemy[view_enemy][i][j]); }
		}
	}
	change_color(15, 0);
}

int not_kill_hero = 1, not_kill_enemy = 1, game_x_hero = 1, game_y_hero = 27, game_x_enemy = 58, game_y_enemy = 38, move_enemy = 1;
char direction_hero;
time_t music_start_time, music_control_time, enemy_start_time, enemy_control_time;
const wchar_t* music_file = L"..\\x64\\Debug\\fearless.wav";

DWORD WINAPI thread_hero(LPVOID lpParameter)
{
	int sleep_hero = 10, cnt, right = 0, left = 0, diff = 0, enemy_wait_count = 3;

	int hero_view = HERO_VIEW_FRONT;

	while (not_kill_hero)
	{
		put_cursor(149, 49); move_enemy = not_kill_enemy; while (!direction_hero) { Sleep(10 * sleep_hero); }

		if (direction_hero == 'w' || direction_hero == 'W')
		{
			if (right != 0)
			{
				if (game_x_hero % 2 == 0) { hero_view = HERO_VIEW_RIGHT_1; }
				else { hero_view = HERO_VIEW_RIGHT_2; }

				for (cnt = 1; cnt <= 15; cnt++)
				{
					do { Sleep(sleep_hero); } while (move_enemy);
					--game_y_hero;
					if (cnt % (10 / right) == 0)
					{
						++game_x_hero;
						put_hero(game_x_hero, game_y_hero, hero_view);
						put_background(game_y_hero, game_x_hero, 2, -1, 3, -1);
						put_background(game_y_hero, game_x_hero, 15, 1, 15, 2);
						put_background(game_y_hero, game_x_hero, 15, 5, 15, 6);
					}
					else
					{
						put_hero(game_x_hero, game_y_hero, hero_view);
						put_background(game_y_hero, game_x_hero, 15, 2, 15, 3);
						put_background(game_y_hero, game_x_hero, 15, 6, 15, 7);
					}
					if (cnt % enemy_wait_count == 0) { move_enemy = not_kill_enemy; }
				}

				for (cnt = 15; cnt >= 1; cnt--)
				{
					do { Sleep(sleep_hero); } while (move_enemy);
					++game_y_hero;
					if (cnt % (10 / right) == 0)
					{
						++game_x_hero;
						put_hero(game_x_hero, game_y_hero, hero_view);
						put_background(game_y_hero, game_x_hero, -1, 0, -1, 6);
						put_background(game_y_hero, game_x_hero, 0, -1, 1, -1);
					}
					else
					{
						put_hero(game_x_hero, game_y_hero, hero_view);
						put_background(game_y_hero, game_x_hero, -1, 1, -1, 7);
					}

					diff = game_y_enemy - game_y_hero;
					if (diff == 15)
					{
						diff = game_x_enemy - game_x_hero;
						if ((-3) <= diff && diff <= 8)
						{
							not_kill_enemy = 0;
						}
					}
					if (cnt % enemy_wait_count == 0) { move_enemy = not_kill_enemy; }
				}


				if (background[game_y_hero + 15][game_x_hero + 2] == 11 && background[game_y_hero + 15][game_x_hero + 3] == 11 && background[game_y_hero + 15][game_x_hero + 4] == 11 && background[game_y_hero + 15][game_x_hero + 5] == 11 && background[game_y_hero + 15][game_x_hero + 6] == 11 && background[game_y_hero + 15][game_x_hero + 7] == 11)
				{
					while (background[game_y_hero + 15][game_x_hero] != 0)
					{
						do { Sleep(sleep_hero); } while (move_enemy);
						if (game_x_hero % 2 == 0) { hero_view = HERO_VIEW_RIGHT_1; }
						else { hero_view = HERO_VIEW_RIGHT_2; }
						++game_y_hero;
						put_hero(game_x_hero, game_y_hero, hero_view);
						put_background(game_y_hero, game_x_hero, -1, 0, -1, 8);
						move_enemy = not_kill_enemy;
					}
					not_kill_hero = 0;
				}
			}

			if (left != 0)
			{
				if (game_x_hero % 2 == 0) { hero_view = HERO_VIEW_LEFT_1; }
				else { hero_view = HERO_VIEW_LEFT_2; }

				for (cnt = 1; cnt <= 15; cnt++)
				{
					do { Sleep(sleep_hero); } while (move_enemy);
					--game_y_hero;
					if (cnt % (10 / left) == 0)
					{
						--game_x_hero;
						put_hero(game_x_hero, game_y_hero, hero_view);
						put_background(game_y_hero, game_x_hero, 2, 9, 3, 9);
						put_background(game_y_hero, game_x_hero, 15, 2, 15, 3);
						put_background(game_y_hero, game_x_hero, 15, 6, 15, 7);
					}
					else
					{
						put_hero(game_x_hero, game_y_hero, hero_view);
						put_background(game_y_hero, game_x_hero, 15, 1, 15, 2);
						put_background(game_y_hero, game_x_hero, 15, 5, 15, 6);
					}
					if (cnt % enemy_wait_count == 0) { move_enemy = not_kill_enemy; }
				}

				for (cnt = 15; cnt >= 1; cnt--)
				{
					do { Sleep(sleep_hero); } while (move_enemy);
					++game_y_hero;
					if (cnt % (10 / left) == 0)
					{
						--game_x_hero;
						put_hero(game_x_hero, game_y_hero, hero_view);
						put_background(game_y_hero, game_x_hero, 0, 9, 1, 9);
						put_background(game_y_hero, game_x_hero, -1, 2, -1, 8);
					}
					else
					{
						put_hero(game_x_hero, game_y_hero, hero_view);
						put_background(game_y_hero, game_x_hero, -1, 1, -1, 7);
					}

					diff = game_y_enemy - game_y_hero;
					if (diff == 15)
					{
						diff = game_x_enemy - game_x_hero;
						if ((-3) <= diff && diff <= 8)
						{
							not_kill_enemy = 0;
						}
					}
					if (cnt % 3 == 0) { move_enemy = not_kill_enemy; }
				}

				if (background[game_y_hero + 15][game_x_hero + 1] == 11 && background[game_y_hero + 15][game_x_hero + 2] == 11 && background[game_y_hero + 15][game_x_hero + 3] == 11 && background[game_y_hero + 15][game_x_hero + 4] == 11 && background[game_y_hero + 15][game_x_hero + 5] == 11 && background[game_y_hero + 15][game_x_hero + 6] == 11)
				{
					while (background[game_y_hero + 15][game_x_hero] != 0)
					{
						do { Sleep(sleep_hero); } while (move_enemy);
						if (game_x_hero % 2 == 0) { hero_view = HERO_VIEW_LEFT_1; }
						else { hero_view = HERO_VIEW_LEFT_2; }
						++game_y_hero;
						put_hero(game_x_hero, game_y_hero, hero_view);
						put_background(game_y_hero, game_x_hero, -1, 1, -1, 7);
						move_enemy = not_kill_enemy;
					}
					not_kill_hero = 0;
				}
			}

			if (right == 0 && left == 0)
			{
				hero_view = HERO_VIEW_FRONT;
				for (cnt = 1; cnt <= 15; cnt++)
				{
					do { Sleep(sleep_hero); } while (move_enemy);
					--game_y_hero;
					put_hero(game_x_hero, game_y_hero, hero_view);
					put_background(game_y_hero, game_x_hero, 15, 2, 15, 3);
					put_background(game_y_hero, game_x_hero, 15, 5, 15, 6);
					if (cnt % enemy_wait_count == 0) { move_enemy = not_kill_enemy; }
				}

				for (cnt = 15; cnt >= 1; cnt--)
				{
					do { Sleep(sleep_hero); } while (move_enemy);
					++game_y_hero;
					put_hero(game_x_hero, game_y_hero, hero_view);
					put_background(game_y_hero, game_x_hero, -1, 1, -1, 7);
					diff = game_y_enemy - game_y_hero;
					if (diff == 15)
					{
						diff = game_x_enemy - game_x_hero;
						if ((-3) <= diff && diff <= 8)
						{
							not_kill_enemy = 0;
						}
					}
					if (cnt % enemy_wait_count == 0) { move_enemy = not_kill_enemy; }
				}
			}
			right = 0;
			left = 0;
		}

		if (direction_hero == 'a' || direction_hero == 'A')
		{
			do { Sleep(sleep_hero); } while (move_enemy);
			if (game_x_hero % 2 == 0) { hero_view = HERO_VIEW_LEFT_1; }
			else { hero_view = HERO_VIEW_LEFT_2; }
			--game_x_hero;
			put_hero(game_x_hero, game_y_hero, hero_view);
			put_background(game_y_hero, game_x_hero, 1, 9, 2, 9);

			if (right == 0)
			{
				put_background(game_y_hero, game_x_hero, 8, 9, 10, 9);
			}
			move_enemy = not_kill_enemy;

			right = 0;
			if (left <= 5) { left++; }

			if (background[game_y_hero + 15][game_x_hero + 1] == 11 && background[game_y_hero + 15][game_x_hero + 2] == 11 && background[game_y_hero + 15][game_x_hero + 3] == 11 && background[game_y_hero + 15][game_x_hero + 4] == 11 && background[game_y_hero + 15][game_x_hero + 5] == 11 && background[game_y_hero + 15][game_x_hero + 6] == 11)
			{
				while (background[game_y_hero + 15][game_x_hero] != 0)
				{
					do { Sleep(sleep_hero); } while (move_enemy);
					if (game_x_hero % 2 == 0) { hero_view = HERO_VIEW_LEFT_1; }
					else { hero_view = HERO_VIEW_LEFT_2; }
					++game_y_hero;
					put_hero(game_x_hero, game_y_hero, hero_view);
					put_background(game_y_hero, game_x_hero, -1, 1, -1, 7);
					move_enemy = not_kill_enemy;
				}
				not_kill_hero = 0;
			}
		}

		if (direction_hero == 'd' || direction_hero == 'D')
		{
			do { Sleep(sleep_hero); } while (move_enemy);
			if (game_x_hero % 2 == 0) { hero_view = HERO_VIEW_RIGHT_1; }
			else { hero_view = HERO_VIEW_RIGHT_2; }
			++game_x_hero;
			put_hero(game_x_hero, game_y_hero, hero_view);
			put_background(game_y_hero, game_x_hero, 1, -1, 2, -1);

			if (right == 0)
			{
				put_background(game_y_hero, game_x_hero, 8, -1, 10, -1);
			}
			move_enemy = not_kill_enemy;

			left = 0;
			if (right <= 5) { right++; }

			if (background[game_y_hero + 15][game_x_hero + 2] == 11 && background[game_y_hero + 15][game_x_hero + 3] == 11 && background[game_y_hero + 15][game_x_hero + 4] == 11 && background[game_y_hero + 15][game_x_hero + 5] == 11 && background[game_y_hero + 15][game_x_hero + 6] == 11 && background[game_y_hero + 15][game_x_hero + 7] == 11)
			{
				while (background[game_y_hero + 15][game_x_hero] != 0)
				{
					do { Sleep(sleep_hero); } while (move_enemy);
					if (game_x_hero % 2 == 0) { hero_view = HERO_VIEW_RIGHT_1; }
					else { hero_view = HERO_VIEW_RIGHT_2; }
					++game_y_hero;
					put_hero(game_x_hero, game_y_hero, hero_view);
					put_background(game_y_hero, game_x_hero, -1, 1, -1, 7);
					move_enemy = not_kill_enemy;
				}
				not_kill_hero = 0;
			}
		}

		if (direction_hero == 's' || direction_hero == 'S')
		{
			do { Sleep(sleep_hero); } while (move_enemy);
			hero_view = HERO_VIEW_FRONT;
			put_hero(game_x_hero, game_y_hero, hero_view);
			right = 0;  left = 0;

			move_enemy = not_kill_enemy;

			if (background[game_y_hero + 15][game_x_hero + 2] == 11 && background[game_y_hero + 15][game_x_hero + 3] == 11 && background[game_y_hero + 15][game_x_hero + 4] == 11 && background[game_y_hero + 15][game_x_hero + 5] == 11 && background[game_y_hero + 15][game_x_hero + 6] == 11)
			{
				while (background[game_y_hero + 15][game_x_hero] != 0)
				{
					++game_y_hero;
					put_hero(game_x_hero, game_y_hero, hero_view);
					put_background(game_y_hero, game_x_hero, -1, 1, -1, 7);
				}
				not_kill_hero = 0;
			}
		}
		direction_hero = 0;
	}
	return NULL;
}

DWORD WINAPI thread_music(LPVOID lpParameter)
{
	while (not_kill_hero)
	{
		time(&music_control_time);

		if (difftime(music_control_time, music_start_time) >= 78)
		{

			PlaySound(music_file, NULL, SND_FILENAME | SND_ASYNC);
			music_start_time = music_control_time;
		}
		Sleep(1000);
	}

	return NULL;
}

DWORD WINAPI thread_keyboard(LPVOID lpParameter)
{
	while (not_kill_hero)
	{
		direction_hero = _getch();
	}

	return NULL;
}

DWORD WINAPI thread_enemy(LPVOID lpParameter)
{
	int sleep_enemy = 100;
	int direction_enemy = 1;
	int view_enemy = ENEMY_VIEW_RIGHT;
	int cnt_enemy = 0;

	time(&enemy_start_time);
	while (not_kill_hero && not_kill_enemy)
	{
		time(&enemy_control_time);
		Sleep(sleep_enemy - 1000 * difftime(enemy_control_time, enemy_start_time));
		time(&enemy_start_time);
		while (!move_enemy && not_kill_hero && not_kill_enemy) { Sleep(sleep_enemy); }
		if (!(not_kill_hero && not_kill_enemy)) { break; }

		game_x_enemy += direction_enemy;

		put_enemy(game_x_enemy, game_y_enemy, view_enemy);
		if (direction_enemy == 1) { put_background(game_y_enemy, game_x_enemy, 0, -1, 3, -1); }
		else { put_background(game_y_enemy, game_x_enemy, 0, 4, 3, 4); }
		cnt_enemy = (cnt_enemy + 1) % 80;
		if (cnt_enemy == 0)
		{
			direction_enemy = -direction_enemy;
			if (direction_enemy == 1) { view_enemy = ENEMY_VIEW_RIGHT; }
			else { view_enemy = ENEMY_VIEW_LEFT; }
		}

		move_enemy = !direction_hero;
	}
	move_enemy = 0;
	not_kill_enemy = 0;
	put_background(game_y_enemy, game_x_enemy, 0, 0, 3, 3);

	return NULL;
}

void Game()
{
	place_bush(33, 1); place_bush(33, 26); place_bush(33, 66); place_bush(33, 91); place_bush(33, 116);
	place_cloud(5, 5); place_cloud(5, 30); place_cloud(5, 55); place_cloud(5, 80); place_cloud(5, 105);

	put_background(0, 0, 0, 0, 49, 149);
	put_enemy(game_x_enemy, game_y_enemy, ENEMY_VIEW_RIGHT);
	put_hero(game_x_hero, game_y_hero, HERO_VIEW_FRONT);

	time(&music_start_time);
	PlaySound(music_file, NULL, SND_FILENAME | SND_ASYNC);

	HANDLE handle_thread_hero = CreateThread(NULL, 0, thread_hero, NULL, 0, NULL);
	HANDLE handle_thread_music = CreateThread(NULL, 0, thread_music, NULL, 0, NULL);
	HANDLE handle_thread_keyboard = CreateThread(NULL, 0, thread_keyboard, NULL, 0, NULL);
	HANDLE handle_thread_enemy = CreateThread(NULL, 0, thread_enemy, NULL, 0, NULL);

	if (WaitForSingleObject(handle_thread_hero, INFINITE) == NULL) { return; }
	if (WaitForSingleObject(handle_thread_music, INFINITE) == NULL) { return; }
	if (WaitForSingleObject(handle_thread_keyboard, INFINITE) == NULL) { return; }
	if (WaitForSingleObject(handle_thread_enemy, INFINITE) == NULL) { return; }

	CloseHandle(handle_thread_hero);
	CloseHandle(handle_thread_music);
	CloseHandle(handle_thread_keyboard);
	CloseHandle(handle_thread_enemy);
}

int main()
{
	window = GetStdHandle(STD_OUTPUT_HANDLE);

	keybd_event(VK_MENU, 0x38, 0, 0);
	keybd_event(VK_RETURN, 0x1c, 0, 0);
	keybd_event(VK_RETURN, 0x1c, KEYEVENTF_KEYUP, 0);
	keybd_event(VK_MENU, 0x38, KEYEVENTF_KEYUP, 0);

	char choice = '0';

	set_window(49, 149);  change_color(15, 0);

	CONSOLE_CURSOR_INFO curInf;
	curInf.dwSize = 100;
	curInf.bVisible = FALSE;

	SetConsoleCursorInfo(window, &curInf);

	while (choice == '0' || choice == '1' || choice == '2')
	{
		if (choice == '0')
		{
			system("CLS");
			put_cursor(60, 20); printf("PRESS 1 FOR GAME");
			put_cursor(60, 21); printf("PRESS 2 FOR INFO");

			put_cursor(149, 49); choice = _getch();
			if (choice != 49 && choice != 50) { exit(1); }
		}

		if (choice == '1')
		{
			not_kill_hero = 1; not_kill_enemy = 1; game_x_hero = 1; game_y_hero = 27; game_x_enemy = 58; game_y_enemy = 38;
			system("CLS"); Game();

			change_color(12, 15); system("cls");
			put_cursor(69, 20); printf("END");
			put_cursor(60, 22); printf("PRESS 0 TO TURN MAIN");
			change_color(15, 0);

			put_cursor(149, 49); choice = _getch();
			if (choice != 48) { exit(1); }
		}

		if (choice == '2')
		{
			system("CLS");
			put_cursor(62, 20); printf("PRESS W TO JUMP");
			put_cursor(60, 21); printf("PRESS A TO GO RIGHT");
			put_cursor(61, 22); printf("PRESS D TO GO LEFT");
			put_cursor(60, 24); printf("PRESS 0 TO TURN MAIN");

			put_cursor(149, 49); choice = _getch();
			if (choice != 48) { exit(1); }
		}
	}
	return 0;
}